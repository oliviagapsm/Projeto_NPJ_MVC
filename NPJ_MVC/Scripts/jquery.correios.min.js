// jQuery CEP Correios v2.0.1
// GitHub: https://github.com/webmaniabr/jQuery-CEP-Correios
// Author: WebmaniaBR
// Author URI: webmaniabr.com
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(o,r){return void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(o)),e(r),r}:e(jQuery)}(function(e){correios={init:function(e,o){window.correios_app_key=e,window.correios_app_secret=o}},e.fn.correios=function(o,r,t,c,a,n,i,l,s,d){var p;return"undefined"==typeof correios_app_key&&(console.log("Informe o app_key da sua aplicação dos Correios."),p=!0),"undefined"==typeof correios_app_secret&&(console.log("Informe o app_secret da sua aplicação dos Correios."),p=!0),!p&&(window.cep||(window.cep=[]),window.cep[this.selector]={c_endereco:o,c_bairro:r,c_cidade:t,c_uf:c,c_loading:a,c_readonly:n,c_numero:i,c_ibge:l,c_trigger_error:s,c_trigger_success:d},e(this).on("keyup",function(){if(input=e(this).val().replace(/[^0-9]/g,""),selector="#"+e(this).attr("id"),8==input.length){if(localStorage.getItem("correios_request")){if(date=localStorage.getItem("correios_request"),current_time=(new Date).getTime(),between=Math.round((current_time-date)/1e3),between<=5)return!1;localStorage.removeItem("correios_request"),localStorage.setItem("correios_request",(new Date).getTime())}else localStorage.setItem("correios_request",(new Date).getTime());cep[selector].c_loading&&e(cep[selector].c_loading).show(),e.getJSON("https://webmaniabr.com/api/1/cep/"+input+"/?app_key="+correios_app_key+"&app_secret="+correios_app_secret,function(a){if(cep[selector].c_trigger_error&&a.error?e(document).trigger(cep[selector].c_trigger_error):a.error?console.log("CEP Error: "+a.error):cep[selector].c_trigger_success&&e(document).trigger(cep[selector].c_trigger_success),cep[selector].c_loading&&e(cep[selector].c_loading).hide(),(cep[selector].c_endereco||e(o).val())&&(e(o).val(a.endereco),"boolean"==typeof cep[selector].c_readonly&&1==cep[selector].c_readonly&&a.endereco?e(o).attr("readonly","readonly"):e(o).removeAttr("readonly")),(cep[selector].c_bairro||e(r).val())&&(e(r).val(a.bairro),"boolean"==typeof cep[selector].c_readonly&&1==cep[selector].c_readonly&&a.bairro?e(r).attr("readonly","readonly"):e(r).removeAttr("readonly")),(cep[selector].c_cidade||e(t).val())&&(e(t).val(a.cidade),"boolean"==typeof cep[selector].c_readonly&&1==cep[selector].c_readonly&&a.cidade?e(t).attr("readonly","readonly"):e(t).removeAttr("readonly")),cep[selector].c_uf||e(c).val()){if(first_value=e(c+" option:eq(2)").val(),first_value.length>2){var n={};e(c).find("option").each(function(){n[e(this).text()]=e(this).attr("value")}),a.uf=n[{AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PE:"Pernambuco",PI:"Piauí",PR:"Paraná",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"}[a.uf]]}e(c).on("correios_clean_select",function(){e(c).find("option").removeAttr("disabled").removeAttr("selected")}),(cep[selector].c_ibge||e(l).val())&&(e(l).val(a.ibge).trigger("change"),"boolean"==typeof cep[selector].c_readonly&&1==cep[selector].c_readonly&&a.ibge?e(l).attr("readonly","readonly"):e(l).removeAttr("readonly")),"boolean"==typeof cep[selector].c_readonly&&1==cep[selector].c_readonly&&e(c).trigger("correios_clean_select"),e(c).find('option[value="'+a.uf+'"]').attr("selected","selected"),"boolean"==typeof cep[selector].c_readonly&&1==cep[selector].c_readonly&&a.uf&&e(c).find(":not(:selected)").prop("disabled",!0),e(c).val(a.uf).trigger("change"),void 0!==e.fn.select2&&e(c).select2(),!a.error&&cep[selector].c_numero&&e(cep[selector].c_numero).focus()}}).always(function(){localStorage.removeItem("correios_request")})}}),this)}});
