var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ? true : false;
function reSetExpandEvents() {
    $(".collapse-link").unbind("click");
    $(".collapse-link").on('click', function () {
        var e = $(this).closest("div.ibox"),
            a = $(this).find("i"),
            o = e.find("div.ibox-content");
        o.slideToggle(200), e.toggleClass("").toggleClass("border-bottom"), setTimeout(function () {
            e.resize(), e.find("[id^=map-]").resize()
        }, 50)
    });
}
function localStorageSupport() {
    return "localStorage" in window && null !== window.localStorage
}

function animationHover(e, a) {
    e = $(e), e.hover(function () {
        e.addClass("animated " + a)
    }, function () {
        window.setTimeout(function () {
            e.removeClass("animated " + a)
        }, 2e3)
    })
}

function WinMove() {
    var e = "[class*=col]",
        a = ".ibox-title",
        o = "[class*=col]";
    $(e).sortable({
        handle: a,
        connectWith: o,
        tolerance: "pointer",
        forcePlaceholderSize: !0,
        opacity: .8
    }).disableSelection()
}
$(document).ready(function () {
    $("#navbar-default-overlay").click(function (event) {
        event.preventDefault();
        toggleMenu();
    });

    $("#navbar-toggle").click(function (event) {
        event.preventDefault();
        toggleMenu();
    });

    $('a.load').click(function (event) {
        fechaMenu();
    });

    function e() {
        var e = $("body > #wrapper").height() - 61;
        $(".sidebard-panel").css("min-height", e + "px");
        var a = $("nav.navbar-default").height(),
            o = $("#page-wrapper").height();
        a > o && $("#page-wrapper").css("min-height", a + "px"), o > a && $("#page-wrapper").css("min-height", $(window).height() + "px"), $("body").hasClass("fixed-nav") && $("#page-wrapper").css("min-height", $(window).height() - 60 + "px")
    }
    $(this).width() < 769 ? $("body").addClass("body-small") : $("body").removeClass("body-small"), $("#side-menu").metisMenu(), $(".collapse-link").click(function () {
        var e = $(this).closest("div.ibox"),
            a = $(this).find("i"),
            o = e.find("div.ibox-content");
        o.slideToggle(200), /*a.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),*/ e.toggleClass("").toggleClass("border-bottom"), setTimeout(function () {
            e.resize(), e.find("[id^=map-]").resize()
        }, 50)
    }), $(".close-link").click(function () {
        var e = $(this).closest("div.ibox");
        e.remove()
    }), $(".right-sidebar-toggle").click(function () {
        $("#right-sidebar").toggleClass("sidebar-open")
    }), $(".dropdown-menu-filtros-toggle").click(function () {
        $(".dropdown-menu-filtros").toggleClass("submenu-open")
    }), $(".sidebar-container").slimScroll({
        height: "100%",
        railOpacity: .4,
        wheelStep: 10
    }), $(".open-small-chat").click(function () {
        $(this).children().toggleClass("fa-comments").toggleClass("fa-remove"), $(".small-chat-box").toggleClass("active")
    }), $(".small-chat-box .content").slimScroll({
        height: "234px",
        railOpacity: .4
    }), $(".check-link").click(function () {
        var e = $(this).find("i"),
            a = $(this).next("span");
        return e.toggleClass("fa-check-square").toggleClass("fa-square-o"), a.toggleClass("todo-completed"), !1
    }), $(".tooltip-demo").tooltip({
        selector: "[data-toggle=tooltip]",
        container: "body"
    }), $(".modal").appendTo("body"), e(), $(window).bind("load", function () {
        $("body").hasClass("fixed-sidebar") && $(".sidebar-collapse").slimScroll({
            height: "100%",
            railOpacity: .9
        })
    }), $(window).scroll(function () {
        $(window).scrollTop() > 0 && !$("body").hasClass("fixed-nav") ? $("#right-sidebar").addClass("sidebar-top") : $("#right-sidebar").removeClass("sidebar-top")
    }), $(document).bind("load resize scroll", function () {
        $("body").hasClass("body-small") || e()
    }), $("[data-toggle=popover]").popover(), $(".full-height-scroll").slimscroll({
        height: "100%"
    })
}), $(window).bind("resize", function () {
    $(this).width() < 769 ? $("body").addClass("body-small") : $("body").removeClass("body-small")
}), $(document).ready(function () {
    if (localStorageSupport) {
        var e = localStorage.getItem("collapse_menu"),
            a = localStorage.getItem("fixedsidebar"),
            o = localStorage.getItem("fixednavbar"),
            i = localStorage.getItem("boxedlayout"),
            s = localStorage.getItem("fixedfooter"),
            l = $("body");
        "on" == a && (l.addClass("fixed-sidebar"), $(".sidebar-collapse").slimScroll({
            height: "100%",
            railOpacity: .9
        })), "on" == e && (l.hasClass("fixed-sidebar") ? l.hasClass("body-small") || l.addClass("mini-navbar") : l.hasClass("body-small") || l.addClass("mini-navbar")), "on" == o && ($(".navbar-static-top").removeClass("navbar-static-top").addClass("navbar-fixed-top"), l.addClass("fixed-nav")), "on" == i && l.addClass("boxed-layout"), "on" == s && $(".footer").addClass("fixed")
    }
});
$('.link-short a').text(function (index, oldText) {
    if (oldText.length > 15) {
        return oldText.substring(0, 15) + '...';
    }
    return oldText;
});

var offCanvasIn = [{
    e: $("#navbar-default"),
    p: {
        translateX: [0, "-100%"]
    },
    o: {
        duration: 300
    }
}];

var offCanvasOut = [{
    e: $("#navbar-default"),
    p: {
        translateX: "-100%"
    },
    o: {
        duration: 300
    }
}];

// run the sequence on click
function toggleMenu() {
    var isOpen = $("#navbar-default").hasClass("menuEscondido");
    var menuOverlay = document.getElementById('navbar-default-overlay');
    if (isOpen) {
        $("#navbar-default").show();
        $.Velocity.RunSequence(offCanvasIn);
        menuOverlay.style.display = 'block';
        $("#navbar-default").removeClass("menuEscondido");
    } else {
        $.Velocity.RunSequence(offCanvasOut);
        menuOverlay.style.display = 'none';
        $("#navbar-default").addClass("menuEscondido");
    }
};

function fechaMenu() {
    var isOpen = $("#navbar-default").hasClass("menuEscondido");
    if (isOpen) {
    } else {
        $.Velocity.RunSequence(offCanvasOut);
        $("#navbar-default").addClass("menuEscondido");
    }
}